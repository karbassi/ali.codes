/*
 * skrollr
 *
 * https://github.com/Prinzhorn/skrollr
 *
 * free to use under terms of MIT license
 */
(function(af,g,v){var ar=af.skrollr={get:function(){return w;},init:function(at){return w||new ak(at);},VERSION:"0.5.14"};var e=Object.prototype.hasOwnProperty;var t;var K;var k="rendered";var P="un"+k;var d="skrollable";var ad="skrollr";var x="no-"+ad;var m="linear";var R=1000;var ai=200;var Y="start";var B="end";var j="top";var ab="center";var aa="bottom";var Q="___has_rendered_class";var u="___skrollable_id";var b=af.requestAnimationFrame;(function(){var av=["ms","moz","webkit","o"];var at;for(at=0;at<av.length&&!b;at++){b=af[av[at]+"RequestAnimationFrame"];}var au=0;if(!b){b=function(ay){var aw=ag();var ax=Math.max(0,30-(aw-au));af.setTimeout(function(){ay(aw+ax);},ax);au=aw+ax;};}}());var an=/^\s*(.+)\s*$/m;var S=/^data(?:-(_\w+))?(?:-?(-?\d+))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/;var D=/\s*([a-z\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi;var f=/^([a-z\-]+)\[(\w+)\]$/;var F=/-([a-z])/g;var h=function(au,at){return at.toUpperCase();};var al=/[\-+]?[\d]*\.?[\d]+/g;var ae=/\{\?\}/g;var I=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g;var T=/[a-z\-]+-gradient/g;var E;var l;var C=function(){var av=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(af.getComputedStyle){var au=af.getComputedStyle(K,null);for(var at in au){E=(at.match(av)||(+at==at&&au[at].match(av)));if(E){break;}}if(E){E=E[0];if(E.slice(0,1)==="-"){l=E;E=({"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"})[E];}else{l="-"+E.toLowerCase()+"-";}}}};var H={begin:function(){return 0;},end:function(){return 1;},linear:function(at){return at;},quadratic:function(at){return at*at;},cubic:function(at){return at*at*at;},swing:function(at){return(-Math.cos(at*Math.PI)/2)+0.5;},sqrt:function(at){return Math.sqrt(at);},bounce:function(au){var at;if(au<=0.5083){at=3;}else{if(au<=0.8489){at=9;}else{if(au<=0.96208){at=27;}else{if(au<=0.99981){at=91;}else{return 1;}}}}return 1-Math.abs(3*Math.cos(au*at*1.028)/at);}};function ak(au){t=g.documentElement;K=g.body;C();w=this;au=au||{};M=au.constants||{};if(au.easing){for(var ax in au.easing){H[ax]=au.easing[ax];}}N={beforerender:au.beforerender,render:au.render};ao=au.forceHeight!==false;i=au.smoothScrolling!==false;z={targetTop:w.getScrollTop()};if(ao){V=au.scale||1;}n(t,[ad],[x]);if(ao){var aw=g.getElementById("skrollr-body")||g.createElement("div");var av=aw.style;av.minWidth="1px";av.position="absolute";av.top=av.zIndex="0";if(!aw.id){av.width="1px";av.right="0";K.appendChild(aw);}(function(ay){A=function(){ay.apply(this,arguments);av.height=(G+t.clientHeight)+"px";};}(A));}w.refresh();ar.addEvent(af,"resize",A);(function at(){b(at);aj();}());return w;}ak.prototype.refresh=function(aC){var aB;var aA=false;if(aC===v){aA=true;ap=[];am=0;aC=g.getElementsByTagName("*");}else{aC=[].concat(aC);}for(aB=0;aB<aC.length;aB++){var au=aC[aB];var ay=au;var at=[];var aK=i;if(!au.attributes){continue;}for(var aJ=0;aJ<au.attributes.length;aJ++){var aE=au.attributes[aJ];if(aE.name==="data-anchor-target"){ay=g.querySelector(aE.value);if(ay===null){throw'Unable to find anchor target "'+aE.value+'"';}continue;}if(aE.name==="data-smooth-scrolling"){aK=aE.value!=="off";continue;}var az=aE.name.match(S);if(az!==null){var av=az[1];av=av&&M[av.substr(1)]||0;var ax=(az[2]|0)+av;var aM=az[3];var aL=az[4]||aM;var aw={offset:ax,props:aE.value,element:au};at.push(aw);if(!aM||aM===Y||aM===B){aw.mode="absolute";if(aM===B){aw.isEnd=true;}else{aw.frame=ax*V;delete aw.offset;}}else{aw.mode="relative";aw.anchors=[aM,aL];}}}if(at.length){var aI,aF;var aD;if(!aA&&u in au){aD=au[u];aI=ap[aD].styleAttr;aF=ap[aD].classAttr;}else{aD=(au[u]=am++);aI=au.style.cssText;aF=W(au);}var aH=ap[aD]={element:au,styleAttr:aI,classAttr:aF,anchorTarget:ay,keyFrames:at,smoothScrolling:aK};n(au,[d,k],[P]);aH[Q]=true;}}A();for(aB=0;aB<aC.length;aB++){var aG=ap[aC[aB][u]];if(aG===v){continue;}aG.keyFrames.sort(o);Z(aG);X(aG);}return w;};ak.prototype.relativeToAbsolute=function(au,av,ax){var at=t.clientHeight;var aw=au.getBoundingClientRect();var az=aw.top;var ay=aw.bottom-aw.top;if(av===aa){az-=at;}else{if(av===ab){az-=at/2;}}if(ax===aa){az+=ay;}else{if(ax===ab){az+=ay/2;}}az+=w.getScrollTop();return(az+0.5)|0;};ak.prototype.animateTo=function(aw,au){au=au||{};var at=ag();var av=w.getScrollTop();L={startTop:av,topDiff:aw-av,targetTop:aw,duration:au.duration||R,startTime:at,endTime:at+(au.duration||R),easing:H[au.easing||m],done:au.done};if(!L.topDiff){if(L.done){L.done.call(w,false);}L=v;}return w;};ak.prototype.stopAnimateTo=function(){if(L&&L.done){L.done.call(w,true);}L=v;};ak.prototype.isAnimatingTo=function(){return !!L;};ak.prototype.setScrollTop=function(au,at){if(at===true){ah=au;J=true;}if(ar.iscroll){ar.iscroll.scrollTo(0,-au);}else{af.scrollTo(0,au);}return w;};ak.prototype.getScrollTop=function(){if(ar.iscroll){return -ar.iscroll.y;}else{return af.pageYOffset||t.scrollTop||K.scrollTop||0;}};ak.prototype.on=function(at,au){N[at]=au;return w;};ak.prototype.off=function(at){delete N[at];return w;};var p=function(){var au;var az;var ay;var aA;var aw;var ax;var at;var aB;var av;for(ax=0;ax<ap.length;ax++){au=ap[ax];az=au.element;ay=au.anchorTarget;aA=au.keyFrames;for(at=0;at<aA.length;at++){aw=aA[at];if(aw.mode==="relative"){aB=az.style.cssText;av=W(az);az.style.cssText=au.styleAttr;n(az,au.classAttr);aw.frame=w.relativeToAbsolute(ay,aw.anchors[0],aw.anchors[1])-aw.offset;az.style.cssText=aB;n(az,av);}if(ao){if(!aw.isEnd&&aw.frame>G){G=aw.frame;}}}}G=Math.max(G,ac());for(ax=0;ax<ap.length;ax++){au=ap[ax];aA=au.keyFrames;for(at=0;at<aA.length;at++){aw=aA[at];if(aw.isEnd){aw.frame=G-aw.offset;}}}};var y=function(aF,aw){for(var aA=0;aA<ap.length;aA++){var ax=ap[aA];var ay=ax.smoothScrolling?aF:aw;var aC=ax.keyFrames;var aE=aC[0].frame;var av=aC[aC.length-1].frame;var aB=ay<=aE;var aJ=ay>=av;var aI;var aG;if(aB||aJ){var aD=aC[aB?0:aC.length-1].props;for(aI in aD){if(e.call(aD,aI)){aG=r(aD[aI].value);ar.setStyle(ax.element,aI,aG);}}if(ax[Q]&&(ay<aE||ay>av)){n(ax.element,[P],[k]);ax[Q]=false;}continue;}if(!ax[Q]){n(ax.element,[k],[P]);ax[Q]=true;}for(var au=0;au<aC.length-1;au++){if(ay>=aC[au].frame&&ay<=aC[au+1].frame){var az=aC[au];var aH=aC[au+1];for(aI in az.props){if(e.call(az.props,aI)){var at=(ay-az.frame)/(aH.frame-az.frame);at=az.props[aI].easing(at);aG=c(az.props[aI].value,aH.props[aI].value,at);aG=r(aG);ar.setStyle(ax.element,aI,aG);}}break;}}}};var aj=function(){var av=w.getScrollTop();var au;var ax=ag();var aw;if(L){if(ax>=L.endTime){av=L.targetTop;au=L.done;L=v;}else{aw=L.easing((ax-L.startTime)/L.duration);av=(L.startTop+aw*L.topDiff)|0;}w.setScrollTop(av);}else{var at=z.targetTop-av;if(at){z={startTop:ah,topDiff:av-ah,targetTop:av,startTime:q,endTime:q+ai};}if(ax<=z.endTime){aw=H.sqrt((ax-z.startTime)/ai);av=(z.startTop+aw*z.topDiff)|0;}}if(av<0){av=0;}if(J||ah!==av){aq=(av>=ah)?"down":"up";J=false;var az={curTop:av,lastTop:ah,maxTop:G,direction:aq};var ay=N.beforerender&&N.beforerender.call(w,az);if(ay!==false){y(av,w.getScrollTop());ah=av;if(N.render){N.render.call(w,az);}}if(au){au.call(w,false);}}q=ax;};var Z=function(at){for(var av=0;av<at.keyFrames.length;av++){var ay=at.keyFrames[av];var aA;var ax;var az;var aw={};var au;while((au=D.exec(ay.props))!==null){az=au[1];ax=au[2];aA=az.match(f);if(aA!==null){az=aA[1];aA=aA[2];}else{aA=m;}ax=ax.indexOf("!")?s(ax):[ax.slice(1)];aw[az]={value:ax,easing:H[aA]};}ay.props=aw;}};var s=function(au){var at=[];I.lastIndex=0;au=au.replace(I,function(av){return av.replace(al,function(aw){return aw/255*100+"%";});});if(l){T.lastIndex=0;au=au.replace(T,function(av){return l+av;});}au=au.replace(al,function(av){at.push(+av);return"{?}";});at.unshift(au);return at;};var X=function(au){var at={};var av;for(av=0;av<au.keyFrames.length;av++){U(au.keyFrames[av],at);}at={};for(av=au.keyFrames.length-1;av>=0;av--){U(au.keyFrames[av],at);}};var U=function(av,at){var au;for(au in at){if(!e.call(av.props,au)){av.props[au]=at[au];}}for(au in av.props){at[au]=av.props[au];}};var c=function(aw,av,au){if(aw.length!==av.length){throw"Can't interpolate between \""+aw[0]+'" and "'+av[0]+'"';}var at=[aw[0]];for(var ax=1;ax<aw.length;ax++){at[ax]=aw[ax]+((av[ax]-aw[ax])*au);}return at;};var r=function(au){var at=1;ae.lastIndex=0;return au[0].replace(ae,function(){return au[at++];});};ar.setStyle=function(au,ax,av){var at=au.style;ax=ax.replace(F,h).replace("-","");if(ax==="zIndex"){at[ax]=""+(av|0);}else{if(ax==="float"){at.styleFloat=at.cssFloat=av;}else{try{if(E){at[E+ax.slice(0,1).toUpperCase()+ax.slice(1)]=av;}at[ax]=av;}catch(aw){}}}};ar.addEvent=function(au,at,aw){var av=function(ax){ax=ax||af.event;if(!ax.target){ax.target=ax.srcElement;}if(!ax.preventDefault){ax.preventDefault=function(){ax.returnValue=false;};}return aw.call(this,ax);};if(af.addEventListener){au.addEventListener(at,av,false);}else{au.attachEvent("on"+at,av);}};var A=function(){G=0;p();J=true;if(ar.iscroll){af.setTimeout(function(){ar.iscroll.refresh();},0);}};var ac=function(){var at=Math.max(K.scrollHeight,K.offsetHeight,t.scrollHeight,t.offsetHeight,t.clientHeight);return at-t.clientHeight;};var W=function(at){var au="className";if(af.SVGElement&&at instanceof af.SVGElement){at=at[au];au="baseVal";}return at[au];};var n=function(av,ax,au){var az="className";if(af.SVGElement&&av instanceof af.SVGElement){av=av[az];az="baseVal";}if(au===v){av[az]=ax;return;}var ay=av[az];for(var at=0;at<ax.length;at++){if(O(ay).indexOf(O(ax[at]))===-1){ay+=" "+ax[at];}}for(var aw=0;aw<au.length;aw++){ay=O(ay).replace(O(au[aw])," ");}av[az]=a(ay).replace(/\s\s+/g," ");};var a=function(at){return at.replace(an,"$1");};var O=function(at){return" "+at+" ";};var ag=Date.now||function(){return +new Date();};var o=function(au,at){return au.frame-at.frame;};var w;var ap;var N;var ao;var G=0;var V=1;var M;var aq="down";var ah=-1;var q=ag();var L;var i;var z;var J;var am=0;}(window,document));